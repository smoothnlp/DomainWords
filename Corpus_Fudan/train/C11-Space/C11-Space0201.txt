宇航学报
JOURNAL OF ASTRONAUTICS
1999年　第1期　No.1　1999



　一种新的硬/软件系统可靠性分析方法*
饶　岚　王占林　李沛琼　姚一平
　　摘　要　在一种新的软件可靠性分析方法基础上,参考硬件系统阶段性任务可靠性的建模方法,为在对于不可修的计算机系统进行可靠性分析时考虑硬、软件之间复杂的相关作用提出了一套比较全面的解决办法。从而为更准确地评估计算机系统可靠性提供了可能。文中分析了一个飞行控制系统实例。
　　主题词　硬/软件系统可靠性　硬、软件相关性　阶段任务性　建模
A NEW ANALYSIS METHODOLOGY 
OF HARDWARE/SOFTWARE SYSTEMS
Rao Lan
(Tsinghua University．Beijing．100084)
Wang Zhanlin Li Peiqiong Yao Yiping
(Beijing Univ.of Aeronautics & Astronautics．Beijing．100083)
　　Abstract　A new analysis methodology of Hardware/Software reliability is presented in this paper,based on a new analysis method of software systems' reliability and hardware phased-mission reliability analysis method.It enables consideration of complex interplay between hardware and software,and then more accurate assessment of computer systems.A real Flying-By-Wire system is analyzed here.
　　Key words　Hardware/Software system reliability Interplay of hardware and software Phasedmission Modeling
1　简介
　　本文基于［1］的工作,参考硬件系统阶段性任务可靠性的建模方法,为在对于不可修的计算机系统进行可靠性分析时考虑硬、软件之间的复杂的相关作用提出了一套比较全面的解决办法。从而为更准确地评估计算机系统可靠性提供了可能。
　　文章第二部分研究对于不可修的硬/软件系统进行考虑硬/软件之间的相关性的可靠性分析的方法。第三部分通过对一个FBW(电传飞行操纵)系统实例的分析,显示了该方法的实施过程以及新建模方法相对于以往方法的合理性。文章最后对本方法进行了讨论。
2　考虑相关性的硬/软件系统可靠性建模分析方法
2.1　硬/软件相关性描述
2.1.1　功能相关性的描述——接口故障的引入
　　由于硬、软件之间存在功能相关性,致使接口故障不可避免地产生。而它既不属于硬件故障,也不属于软件故障。为了完整地描述系统的故障行为,必须引入接口故障。
2.1.2　运行相关性的描述
　　如果根据硬、软件的运行功能图能划分出足够的中间任务阶段状态,来区分系统的不同运行情况,自然地,运行相关性就得到了描述。
2.1.3　故障相关性的描述
　　同样,故障的发生也会使系统前后的工作状态发生变化,从而引起相应的参数发生变化。同样可以设立足够的中间阶段状态进行描述。共因故障是一类较复杂的故障,我们将其作为一类系统级的故障因素单独提出来进行描述。
2.2　硬/软件系统的阶段性
2.2.1　阶段分解
　　［2］上指出,虽然计算机发展迅速,但Von Newmann型体系结构的二个最主要的特性并没有被突破,即计算机内部信息流动是由指令驱动的,指令执行顺序是由程序流程和指令计算器决定的,而条件执行语句的是否执行,则是由执行条件,外部环境、系统状态,以及输入数据的变化等因素决定。一旦这些状态发生变化,下一步执行的软件部分也将发生变化,即不同时间段投入运行的硬/软件组成部件并不完全相同,而这是由软件系统层次化控制流程,外部环境、系统状态,以及输入数据的变化等因素所决定。因此我们可以依据软件的控制流程图来划分软件运行子系统,进而决定相应的支持硬件及其逻辑关系,从而形成一个阶段性的硬/软件子系统,依据系统工作状态和环境负载变化决定子系统是否执行以及执行频率,这样,硬/软件系统就被统一地分离和描述了。
2.2.2　阶段内的状态关系
　　考虑到软件子系统与硬件子系统具有同一时间起点,即在同一任务阶段内,它们之间是串联的关系。如果需要,接口因素、软件系统级故障、共因故障等等都可以分阶段描述。对于任何阶段,这些因素发生都会导致这个阶段的崩溃,因而这些因素与该层次的其它因素之间的可靠性关系也是串联的关系。
2.3　硬/软件系统可靠性建模分析
2.3.1　建模思想
　　根据以上的分析,总结硬/软件系统可靠性建模分析过程如下:
　　1)首先将系统的任务阶段性明确划分出来,划分的标准即看系统的每个功能
　　a.是否是依小于1的概率投入运行;和
　　b.硬件运行构成是否在运行过程中有变化。
　　c.投入运行的软件部分是否在运行过程中有变化。
　　2)根据软件的功能,依据上述划分进行功能分解,设立不同的系统的中间状态;
　　3)将支持每个任务阶段以及本阶段任务影响到软件单元和硬件部件完整地准确地找出来,弄清它们在实现可靠性中的关系,形成硬件阶段子系统和软件阶段子系统;
　　4)系统各个任务阶段内的故障事件可以分成由以下几个事件组成:硬件故障事件,软件故障事件,接口故障事件,和共因故障事件。这些故障事件即可以立即导致系统失效也可以不立即导致系统失效。但系统失效状态是吸收状态。
　　5)将软件子系统和相应的接口特性,以及共因因素作为与硬件阶段子系统串联的虚拟的“硬件部件”与硬件阶段子系统一起构成一个完整的阶段子系统;
　　6)将一个个阶段子系统依据软件控制流图构成系统可靠性框图或系统状态转移图;
　　7)将软件系统级失效原因与高层次的接口因素与共因因素同上述结果串联处理;
　　8)获取相应的参数;
　　9)求解系统状态转移方程,求得系统可靠性指标参数。
2.3.2　基本马氏过程模型形式
　　下面我们推导基于马氏过程假设的系统可靠性模型。
2.3.2.1　假设
　　1)系统不可修;
　　2)系统的故障状态不一定是吸收状态,但系统的失效状态是吸收状态;
　　3)系统各个任务阶段的故障事件由以下几个事件组成:硬件故障事件,软件故障事件,接口故障事件和共因故障事件。每种故障即可立即导致系统失效,也可不立即导致系统失效。
　　4)系统任务阶段内的状态转移与任务阶段之间的任务转移均为马氏过程;
2.3.2.2　数学标志定义及模型推导
　　我们提出下列的数学标志:
　　hjli:第j个硬件元部件在第1条成功链中的第i个任务阶段的状态,hjli=0,失效,hjli=1,正常;因为系统不可修,所以当k＞j时hkli≤hjli;
　　suli:第1条成功链中第i阶段软件功能单元状态,suli=0,失效,suli=1,正常;
　　sfli:第1条成功链中第i阶段软件系统级失效因子状态,sfli=0,失效,sfli=1,正常;
　　juli:第1条成功链中第i阶段接口单元状态,juli=0,失效,juli=1,正常;
　　culi:第1条成功链中第i阶段接口单元状态,culi=0,失效,juli=1,正常;
　　Sli:在第1条成功链中第i阶段的系统状态集合,Sli={h1li,h2li,…,hmli,suli,juli,culi)={Skli},li=1,2,…;Skli是Sli的一个具体实现,S={Sli},;
　　Pkli(t):系统在时刻t时处于第1条成功链中第i个阶段第k个状态的概率;
　　Pli(t)=［P1li(t),…,Pjli(t),…］
　　P(0):系统初始阶段的状态概率向量;
　　R(t):系统在时刻t的任务可靠性;
　　C:系统成功完成任务的阶段,C可以是一个向量:C=(C1,…,Cj);
　　Φkli:系统在第1条成功链中第i个阶段的第k个状态Skli的结构函数,Φkli=1,代表Skli正常,Φkli=0,代表Skli失效,是吸收状态;
　　A:系统的转移率矩阵。
　　对于X(t),t≥0,X(t)∈S这样一个马氏过程系统,求解下列微分方程

(1)
　　可以得到系统可靠度R(t)为:

(2)
3　例子分析
　　同样让我们示意性地分析［1］中的FBW系统。首先划分该系统的中间状态:此例的中间状态是由于系统硬件降阶造成的。令系统单故障工作,则系统可以分解成两个阶段性工作状态:A4状态:四余度电传操纵系统工作状态和A3:三余度系统工作状态。其中A4状态阶段子系统的构成是:四余度管理及飞行控制软件子系统;四余度硬件系统;四余度接口因子;共因故障因子。A3状态阶段子系统的构成是:三余度管理及飞行控制软件子系统;三余度硬件系统;三余度接口因子;共因故障因子。在不同中间状态之间的状态转移概率就是单通道硬件系统的失效概率。
　　在这个系统的失效历史中,那些软件需求错误,硬件需求错误导致的失效(无记录),以及因为接口不明确导致的失效,按照本文的定义都应算作接口失效,本例中,表4的失效数据即接口失效数据;而系统的共因失效只有一个例子。
　　考虑接口及各种系统级故障因素,则［1］中图3的系统状态转移图就变为如图1所示。


　　图1　FBW系统状态转移图
则系统在第i个工作阶段的状态集以及相应的结构函数值可列出如下表所示:
表1　系统工作状态与结构函数阵列
状态h1h2h3h4su1ju1cu1su2ju2cu2Φ
S11111111　　　1
S2XXXX　　　1111
　　其中,X=0或1,但h1+h2+h3+h4=3。即这个系统有二条维持系统正常工作的状态转移链S1,S1→S2。
　　延用［1］中的作法,可以得出到系统试验1747小时时系统各阶段子系统的失效率为
全系统故障率λ=0.00462
硬件四余度管理及飞行控制软件子系统故障率λs4=0.00302
硬件三余度管理及飞行控制软件子系统故障率λs3=0.00418
硬件四余度系统故障率λh4=0.004
硬件三余度系统故障率λh3=0.003
接口故障率λi=0.00104
共因故障率λc=1/1747=0.00057
　　令系统开始工作时是完好状态,则解下列方程就可以得到系统状态停留概率分布向量P(t)=［P1(t)P2(t)P3(t)］,其中,

进而可以求得当系统运行时间为1小时时,系统可靠度为
R(1)=P1(1)+P2(2)=0.9954
　　其它建模方法的结果
　　用一般黑箱方法求得四余度FBW系统单故障工作的任务可靠性的结果为

　　图2为用两个方法分别计算的系统任务可靠性曲线,实线为本文方法的结果,虚线为黑箱方法的结果,按照本文方法求得的结果虽然已经相当保守,但由于它考虑到了软、硬件的相关作用,还是比黑箱方法的结果好。

图2　用两个方法分别计算的系统任务可靠性曲线
4　结论
　　本文论述的方法,为对不可修计算机系统进行可靠性分析时考虑硬、软件之间的相关作用提出了一套比较全面的解决办法。
4.1　系统故障类型划分的覆盖性
　　本文的故障类型划分是从故障产生的根源进行划分的,并且考虑了在运行环境中的不可预见因素(如共因因素),因此可以说它覆盖了所有的故障类型。
4.2　对于硬、件件相关作用的描述能力
　　由于对软件可以灵活分解,为设立系统中间状态提供了可能。如果我们建立了足够的系统状态,利用马氏过程理论就可以实现对硬、软件相互作用的描述。
4.3　本方法的计算结果与对系统的认识程度有关
　　本方法的分析结果与对系统的认识程度有关,与环境也是密切相关的。
　　由于各种条件的限制,本文将硬、软件之间的维修相关性与其它相关性分开讨论,其目的是在现有条件下,为进行硬/软件综合系统的可靠性分析做一些基础性的工作。在对实际系统建模分析时,应根据不同的情况灵活处理。
*本课题得到中国博士后科研基金的资助
作者单位：饶岚　(清华大学计算机系设计自动化教研组．北京．100084) 王占林　李沛琼　姚一平(北京航空航天大学．北京．100083)　
参考文献
　[1]饶岚,王占林,李沛琼,姚一平.从硬/软件系统角度分析软件可靠性.宇航学报
　[2]孙强南,孙昱东编著.计算机系统结构.科学出版社,1992,10
收稿日期:1996年11月14日,修回日期:1998年4月20日
